<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:YogaCustomerApp.Pages"
             x:Class="YogaCustomerApp.Pages.ClassListPage"
             Title="Available Classes">
    
    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Search Section -->
        <StackLayout Grid.Row="0" Padding="15" Spacing="10">
            <Label Text="Search Classes" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center"/>
            
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Entry x:Name="entrySearchDay" Placeholder="Search by day (e.g., Monday)" Grid.Column="0"/>
                <Entry x:Name="entrySearchTime" Placeholder="Search by time (e.g., 10:00)" Grid.Column="1"/>
            </Grid>
            
            <Button Text="Search" Clicked="OnSearchClicked" BackgroundColor="#4CAF50" TextColor="White"/>
            <Button Text="Clear Search" Clicked="OnClearSearchClicked" BackgroundColor="#FF9800" TextColor="White"/>
        </StackLayout>

        <!-- Classes List -->
        <CollectionView Grid.Row="1" x:Name="classListView" SelectionMode="Single" SelectionChanged="OnClassSelected">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BorderColor="#E0E0E0" Margin="10,5" Padding="15" CornerRadius="8">
                        <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">
                            <Label Grid.Row="0" Grid.Column="0" Text="{Binding Date}" FontAttributes="Bold" FontSize="16"/>
                            <Label Grid.Row="1" Grid.Column="0" Text="{Binding Teacher}" FontSize="14" TextColor="#666"/>
                            <Label Grid.Row="2" Grid.Column="0" Text="{Binding Comment}" FontSize="12" TextColor="#999" IsVisible="{Binding Comment, Converter={x:Static local:StringToBoolConverter.Instance}}"/>
                            
                            <Button Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" 
                                    Text="Add to Cart" 
                                    Clicked="OnAddToCartClicked"
                                    BackgroundColor="#2196F3" 
                                    TextColor="White"
                                    CornerRadius="20"
                                    Padding="10,5"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <CollectionView.EmptyView>
                <StackLayout HorizontalOptions="Center" VerticalOptions="Center">
                    <Label Text="No classes found" FontSize="16" TextColor="#666" HorizontalOptions="Center"/>
                    <Label Text="Try refreshing or check your internet connection" FontSize="12" TextColor="#999" HorizontalOptions="Center"/>
                </StackLayout>
            </CollectionView.EmptyView>
        </CollectionView>

        <!-- Status -->
        <Label Grid.Row="2" x:Name="statusLabel" Text="Loading classes..." HorizontalOptions="Center" Padding="10"/>
    </Grid>
</ContentPage>
